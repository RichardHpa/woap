(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/woap19-logo.3c90ae3e.svg"},33:function(e,t,a){e.exports=a(90)},38:function(e,t,a){},39:function(e,t,a){},56:function(e,t,a){},73:function(e,t,a){},74:function(e){e.exports=[{featureType:"administrative",elementType:"labels",stylers:[{color:"#ffffff"},{visibility:"simplified"}]},{featureType:"landscape",stylers:[{color:"#27ae60"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#95a5a6"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#3498db"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]}]},90:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(13),r=a.n(i),s=(a(38),a(7)),c=a(8),o=a(10),d=a(9),m=a(2),u=a(11),v=a(30),p=a.n(v),h=(a(39),a(31)),E=a.n(h),f=(a(56),a(4)),g=a(5),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={loaded:!1,imgLoaded:!1},a.closeInfo=a.closeInfo.bind(Object(m.a)(a)),a.handleImageLoad=a.handleImageLoad.bind(Object(m.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.currentEvent!==e.currentEvent&&(this.setState({imgLoaded:!1,loaded:!0}),null===this.props.currentEvent&&this.setState({loaded:!1,imgLoaded:!1}))}},{key:"handleImageLoad",value:function(){this.setState({imgLoaded:!0})}},{key:"renderMoreInfo",value:function(){var e=this.props,t=e.currentEvent,a=e.currentView,n=this.state.imgLoaded,i={backgroundImage:"url("+t.eventDetails.image+")"};return"burger"===a?l.a.createElement("div",{className:"eventDetails"},l.a.createElement("h2",null,t.eventDetails.name_of_burger," - $",t.eventDetails.burger_price),l.a.createElement("h3",null,t.venueDetails.title),t.eventDetails.image?l.a.createElement("div",{className:"mainImage ".concat(n?"imageLoaded":""),style:i},n?"":l.a.createElement("div",{className:"lds-spinner"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)),l.a.createElement("img",{src:t.eventDetails.image,alt:t.eventDetails.name_of_burger,className:"imgSrc",onLoad:this.handleImageLoad})):"",l.a.createElement("p",null,t.eventDetails.burger_description),l.a.createElement("p",null,t.venueDetails.address1,", ",t.venueDetails.address2)):"dine"===a?l.a.createElement("div",{className:"eventDetails"},l.a.createElement("h2",null,t.venueDetails.title),t.eventDetails.image?l.a.createElement("div",{className:"mainImage ".concat(n?"imageLoaded":""),style:i},n?"":l.a.createElement("div",{className:"lds-spinner"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)),l.a.createElement("img",{src:t.eventDetails.image,className:"imgSrc",alt:t.venueDetails.title,onLoad:this.handleImageLoad})):"",l.a.createElement("p",null,t.eventDetails.festival_dish_description),l.a.createElement("p",null,t.venueDetails.address1,", ",t.venueDetails.address2)):"events"===a?l.a.createElement("div",{className:"eventDetails"},l.a.createElement("h2",null,t.eventDetails.title),l.a.createElement("h3",null,t.venueDetails.title),t.eventDetails.image?l.a.createElement("div",{className:"mainImage ".concat(n?"imageLoaded":""),style:i},n?"":l.a.createElement("div",{className:"lds-spinner"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)),l.a.createElement("img",{src:t.eventDetails.image,className:"imgSrc",alt:t.eventDetails.title,onLoad:this.handleImageLoad})):"",l.a.createElement("p",null,t.eventDetails.short_description),l.a.createElement("p",null,t.venueDetails.address1,", ",t.venueDetails.address2)):"cocktail"===a?l.a.createElement("div",{className:"eventDetails"},l.a.createElement("h2",null,t.eventDetails.title," - $",t.eventDetails.price_of_cocktail_tapas_match),l.a.createElement("h3",null,t.venueDetails.title),t.eventDetails.image?l.a.createElement("div",{className:"mainImage ".concat(n?"imageLoaded":""),style:i},n?"":l.a.createElement("div",{className:"lds-spinner"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)),l.a.createElement("img",{src:t.eventDetails.image,className:"imgSrc",alt:t.eventDetails.title,onLoad:this.handleImageLoad})):"",l.a.createElement("p",null,t.eventDetails.description_of_cocktail_and_regionally_inspired_tapas_match),l.a.createElement("p",null,t.venueDetails.address1,", ",t.venueDetails.address2)):void 0}},{key:"closeInfo",value:function(){this.setState({loaded:!1,imgLoaded:!1}),this.props.closeEvent()}},{key:"render",value:function(){var e=this.props.currentEvent,t=this.state.loaded;return l.a.createElement("div",{className:"infoSidebar ".concat(t?"InfoOpen":"")},l.a.createElement("div",{className:"backArrow",onClick:this.closeInfo},l.a.createElement(f.a,{icon:g.a,size:"2x"})),e?this.renderMoreInfo():"")}}]),t}(n.Component),y=a(15),b=(a(73),a(74)),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).displayMarkers=function(){var e=a.state.activeMarker;a.props.currentEvent;return a.state.markers.map(function(t,n){var i="/woap/img/"+a.state.currentType+"Marker.png";return e&&e.id===t.id&&(i="/woap/img/selectedMarker.png"),l.a.createElement(y.Marker,{key:n,id:t.id,icon:{url:i},position:{lat:t.lat,lng:t.lng},onClick:a.onMarkerClick})})},a.state={zoom:12,mapLocation:{lat:-41.2865,lng:174.7762},markers:[],currentType:"",activeMarker:null},a.onMarkerClick=a.onMarkerClick.bind(Object(m.a)(a)),a.onMapClicked=a.onMapClicked.bind(Object(m.a)(a)),a.mapReady=a.mapReady.bind(Object(m.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({markers:this.props.currentMarkers,currentType:this.props.currentView})}},{key:"componentDidUpdate",value:function(e){this.props.currentView!==e.currentView&&this.setState({markers:this.props.currentMarkers,currentType:this.props.currentView,activeMarker:null}),this.props.currentMarkers!==e.currentMarkers&&this.setState({markers:this.props.currentMarkers,activeMarker:null})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.zoom!==t.zoom||this.state.mapLocation!==t.mapLocation||(this.state.markers!==e.currentMarkers||this.state.currentType!==e.currentView)}},{key:"onMarkerClick",value:function(e,t,a){for(var n=this.state.markers,l=e.id,i=0;i<n.length;i++)if(n[i].id===l){this.props.selectedMarker(n[i]),this.setState({zoom:15,mapLocation:t.position,activeMarker:t});break}}},{key:"onMapClicked",value:function(){this.props.mapClick()}},{key:"mapReady",value:function(){this.props.mapReady()}},{key:"render",value:function(){var e=this.state,t=e.zoom,a=e.mapLocation;return this.mapReady(),l.a.createElement(y.Map,{google:this.props.google,initialCenter:a,center:a,zoom:t,minZoom:10,styles:b,onClick:this.onMapClicked,onReady:this.mapReady,disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{position:"LEFT_CENTER"}},this.displayMarkers())}}]),t}(n.Component),M=Object(y.GoogleApiWrapper)({apiKey:"AIzaSyAz3aIGADUMweodEJhRzDi-evUay7h9jIA"})(D),w=a(32),_=a.n(w),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).state={appLoaded:!1,eventsLoaded:!1,navVisibile:!1,navOpen:!1,allEvents:[],currentView:"burger",currentEvent:null,value:{min:2,max:10},filters:{min:0,max:10},filteredMarkers:[],warning:!1},a.handleMapReady=a.handleMapReady.bind(Object(m.a)(a)),a.toggleNav=a.toggleNav.bind(Object(m.a)(a)),a.handleSelectMarker=a.handleSelectMarker.bind(Object(m.a)(a)),a.handleMapClick=a.handleMapClick.bind(Object(m.a)(a)),a.changeFilter=a.changeFilter.bind(Object(m.a)(a)),a.filter=a.filter.bind(Object(m.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("https://visawoap.com/api/venues/page:1/limit:1000/.json?key=4e44f1ac85cd60e3caa56bfd4afb675e").then(function(t){for(var a=[],n=0;n<t.data.venues.length;n++)t.data.venues[n].Event.length>0&&a.push(t.data.venues[n]);for(var l={events:[],burger:[],dine:[],cocktail:[]},i=1,r=0;r<a.length;r++)for(var s=a[r],c=0;c<s.Event.length;c++){var o=s.Venue.ll.split(","),d=s.Event[c],m={id:i,venueDetails:s.Venue,eventDetails:d,lat:parseFloat(o[0]),lng:parseFloat(o[1])},u=parseInt(m.eventDetails.event_type_id);29===u?l.events.push(m):30===u?l.burger.push(m):31===u?l.dine.push(m):32===u&&l.cocktail.push(m),i++}for(var v=1e7,p=0,h=0;h<l.burger.length;h++){var E=parseInt(l.burger[h].eventDetails.burger_price);E<v&&(v=E),E>p&&(p=E)}e.setState({allEvents:l,eventsLoaded:!0,filters:{min:v,max:p},value:{min:v,max:p},filteredMarkers:l[e.state.currentView]})})}},{key:"handleMapReady",value:function(){var e=this;this.setState({appLoaded:!0,navVisibile:!0}),setTimeout(function(){e.setState({warning:!0})},5e3)}},{key:"changeView",value:function(e){for(var t=this.state,a=(t.value,t.allEvents),n=1e7,l=0,i=0;i<a[e].length;i++){var r=0;"events"===e?r=parseInt(a[e][i].eventDetails.highest_price):"burger"===e?r=parseInt(a[e][i].eventDetails.burger_price):"dine"===e?r=parseInt(a[e][i].eventDetails.price_of_your_festival_dish):"cocktail"===e&&(r=parseInt(a[e][i].eventDetails.price_of_cocktail_tapas_match)),r<n&&(n=r),r>l&&(l=r)}this.setState({currentView:e,currentEvent:null,filters:{min:n,max:l},value:{min:n,max:l},filteredMarkers:a[e]})}},{key:"toggleNav",value:function(){this.setState(function(e){return{navOpen:!e.navOpen}})}},{key:"handleSelectMarker",value:function(e){this.setState({currentEvent:e})}},{key:"handleMapClick",value:function(){this.setState({currentEvent:null})}},{key:"changeFilter",value:function(e){this.setState({value:e})}},{key:"filter",value:function(){for(var e=this.state,t=e.value,a=e.allEvents,n=e.currentView,l=(e.filteredMarkers,[]),i=0;i<a[n].length;i++){var r=0;"events"===n?r=parseInt(a[n][i].eventDetails.highest_price):"burger"===n?r=parseInt(a[n][i].eventDetails.burger_price):"dine"===n?r=parseInt(a[n][i].eventDetails.price_of_your_festival_dish):"cocktail"===n&&(r=parseInt(a[n][i].eventDetails.price_of_cocktail_tapas_match)),r>t.min&&r<t.max&&l.push(a[n][i])}this.setState({filteredMarkers:l})}},{key:"render",value:function(){var e=this,t=this.state,a=t.appLoaded,n=t.navOpen,i=t.navVisibile,r=(t.allEvents,t.currentView),s=t.currentEvent,c=t.eventsLoaded;return console.log(this.state),l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header ".concat(a?"":"App-Loading")},l.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"})),l.a.createElement("div",{className:"hamburgerContainer ".concat(i?"":"hidden")},l.a.createElement("div",{id:"nav-icon3",onClick:this.toggleNav,className:n?"open":""},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null))),l.a.createElement("div",{className:"sidebar ".concat(n?"sidebar-open":"")},l.a.createElement("div",{className:"filters ".concat(r,"View")},l.a.createElement("div",null,l.a.createElement("div",{className:"festivalCatsContainer"},l.a.createElement("div",{className:"festivalCats events ".concat("events"===r?"active":""),onClick:this.changeView.bind(this,"events")},l.a.createElement(f.a,{icon:g.c})," Events"),l.a.createElement("div",{className:"festivalCats dine ".concat("dine"===r?"active":""),onClick:this.changeView.bind(this,"dine")},l.a.createElement(f.a,{icon:g.e})," Dine"),l.a.createElement("div",{className:"festivalCats burger ".concat("burger"===r?"active":""),onClick:this.changeView.bind(this,"burger")}," ",l.a.createElement(f.a,{icon:g.d})," Burger"),l.a.createElement("div",{className:"festivalCats cocktail ".concat("cocktail"===r?"active":""),onClick:this.changeView.bind(this,"cocktail")},l.a.createElement(f.a,{icon:g.b})," Cocktails")),l.a.createElement("div",{className:"priceFilter"},l.a.createElement("label",null,"Price Range ($)"),l.a.createElement(_.a,{maxValue:this.state.filters.max,minValue:this.state.filters.min,value:this.state.value,onChange:function(t){return e.setState({value:t})},onChangeComplete:this.filter})),l.a.createElement("div",null)),l.a.createElement("div",{className:"credit"},l.a.createElement("p",null,"Created by ",l.a.createElement("a",{href:"http://richard-hpa.com/",target:"_blank"},"Richard Hpa")))),l.a.createElement(k,{currentEvent:s,currentView:r,closeEvent:this.handleMapClick})),l.a.createElement("div",{id:"Map"},c?l.a.createElement(M,{currentView:this.state.currentView,currentMarkers:this.state.filteredMarkers,selectedMarker:this.handleSelectMarker,mapClick:this.handleMapClick,mapReady:this.handleMapReady}):""),l.a.createElement("div",{id:"warning",className:this.state.warning?"warning-open":""},l.a.createElement("p",null,"This is not an official Visa WOAP application and has just been created for fun by ",l.a.createElement("a",{href:"http://richard-hpa.com/",target:"_blank"},"Richard Hpa"),".")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.ef23b689.chunk.js.map